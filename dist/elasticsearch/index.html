<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ElasticSearch | Simon&#39;s Blog</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/blog-src/dist/assets/css/styles.2dbcb048.css" as="style"><link rel="preload" href="/blog-src/dist/assets/js/app.2dbcb048.js" as="script"><link rel="preload" href="/blog-src/dist/assets/js/4.32ab6617.js" as="script"><link rel="prefetch" href="/blog-src/dist/assets/css/3.styles.6d42e6eb.css"><link rel="prefetch" href="/blog-src/dist/assets/css/7.styles.d8aa6043.css"><link rel="prefetch" href="/blog-src/dist/assets/js/1.ef6d7d82.js"><link rel="prefetch" href="/blog-src/dist/assets/js/10.cac893df.js"><link rel="prefetch" href="/blog-src/dist/assets/js/11.b4626fbc.js"><link rel="prefetch" href="/blog-src/dist/assets/js/12.d99d2c43.js"><link rel="prefetch" href="/blog-src/dist/assets/js/13.2381fb66.js"><link rel="prefetch" href="/blog-src/dist/assets/js/14.6d193fd5.js"><link rel="prefetch" href="/blog-src/dist/assets/js/15.5b7fb46a.js"><link rel="prefetch" href="/blog-src/dist/assets/js/16.a403d1c9.js"><link rel="prefetch" href="/blog-src/dist/assets/js/17.b8a3de27.js"><link rel="prefetch" href="/blog-src/dist/assets/js/18.a034bb59.js"><link rel="prefetch" href="/blog-src/dist/assets/js/19.ca46936d.js"><link rel="prefetch" href="/blog-src/dist/assets/js/2.f20ba5be.js"><link rel="prefetch" href="/blog-src/dist/assets/js/20.ed0a211c.js"><link rel="prefetch" href="/blog-src/dist/assets/js/3.6d42e6eb.js"><link rel="prefetch" href="/blog-src/dist/assets/js/5.96e052de.js"><link rel="prefetch" href="/blog-src/dist/assets/js/6.deed1cda.js"><link rel="prefetch" href="/blog-src/dist/assets/js/7.d8aa6043.js"><link rel="prefetch" href="/blog-src/dist/assets/js/8.a718645b.js"><link rel="prefetch" href="/blog-src/dist/assets/js/9.91e3b67c.js">
    <link rel="stylesheet" href="/blog-src/dist/assets/css/3.styles.6d42e6eb.css"><link rel="stylesheet" href="/blog-src/dist/assets/css/7.styles.d8aa6043.css"><link rel="stylesheet" href="/blog-src/dist/assets/css/styles.2dbcb048.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog-src/dist/" class="home-link router-link-active"><!----> <span class="site-name">Simon's Blog</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog-src/dist/js/" class="nav-link">js</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog-src/dist/mysql/" class="nav-link">mysql</a></li><li class="dropdown-item"><!----> <a href="/blog-src/dist/elasticsearch/" class="nav-link router-link-exact-active router-link-active">elasticsearch</a></li><li class="dropdown-item"><!----> <a href="/blog-src/dist/redis/" class="nav-link">redis</a></li><li class="dropdown-item"><!----> <a href="/blog-src/dist/nginx/" class="nav-link">nginx</a></li><li class="dropdown-item"><!----> <a href="/blog-src/dist/swoole/" class="nav-link">swoole</a></li><li class="dropdown-item"><!----> <a href="/blog-src/dist/live/" class="nav-link">直播入门</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog-src/dist/js/" class="nav-link">js</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog-src/dist/mysql/" class="nav-link">mysql</a></li><li class="dropdown-item"><!----> <a href="/blog-src/dist/elasticsearch/" class="nav-link router-link-exact-active router-link-active">elasticsearch</a></li><li class="dropdown-item"><!----> <a href="/blog-src/dist/redis/" class="nav-link">redis</a></li><li class="dropdown-item"><!----> <a href="/blog-src/dist/nginx/" class="nav-link">nginx</a></li><li class="dropdown-item"><!----> <a href="/blog-src/dist/swoole/" class="nav-link">swoole</a></li><li class="dropdown-item"><!----> <a href="/blog-src/dist/live/" class="nav-link">直播入门</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blog-src/dist/elasticsearch/" class="active sidebar-link">ElasticSearch</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-src/dist/elasticsearch/#elasticsearch简介" class="sidebar-link">ElasticSearch简介</a></li><li class="sidebar-sub-header"><a href="/blog-src/dist/elasticsearch/#安装" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/blog-src/dist/elasticsearch/#分布式配置" class="sidebar-link">分布式配置</a></li><li class="sidebar-sub-header"><a href="/blog-src/dist/elasticsearch/#基础概念" class="sidebar-link">基础概念</a></li><li class="sidebar-sub-header"><a href="/blog-src/dist/elasticsearch/#基本用法" class="sidebar-link">基本用法</a></li><li class="sidebar-sub-header"><a href="/blog-src/dist/elasticsearch/#高级查询" class="sidebar-link">高级查询</a></li><li class="sidebar-sub-header"><a href="/blog-src/dist/elasticsearch/#结语" class="sidebar-link">结语</a></li></ul></li></ul> </div> <div class="page"> <div class="content"><h1 id="elasticsearch"><a href="#elasticsearch" aria-hidden="true" class="header-anchor">#</a> ElasticSearch</h1> <h2 id="elasticsearch简介"><a href="#elasticsearch简介" aria-hidden="true" class="header-anchor">#</a> ElasticSearch简介</h2> <p>ElasticSearch是基于Apache Lucene构建的开源搜索引擎；采用java编写，提供了简单易用的RESTFul API，由于是使用java编写，运行环境的JAVA的JDK版本必须&gt;=1.8；支持分布式集群，轻松的进行横向扩展</p> <h3 id="应用场景"><a href="#应用场景" aria-hidden="true" class="header-anchor">#</a> 应用场景</h3> <ul><li>海量数据分析引擎</li> <li>站内搜索引擎</li> <li>数据仓库</li></ul> <h2 id="安装"><a href="#安装" aria-hidden="true" class="header-anchor">#</a> 安装</h2> <p>在<a href="https://www.elastic.co/downloads/elasticsearch" target="_blank" rel="noopener noreferrer">官网下载<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>下载压缩包（6.6.0版本），解压后进入目录，目录结构如下</p> <div class="language-bash extra-class"><pre class="language-bash"><code>-rw-r--r--@  1 simon  staff    13K Jan 24 19:24 LICENSE.txt  
-rw-r--r--@  1 simon  staff   394K Jan 24 19:29 NOTICE.txt
-rw-r--r--@  1 simon  staff   8.3K Jan 24 19:24 README.textile
drwxr-xr-x@ 45 simon  staff   1.4K Jan 24 19:29 bin // 可执行文件目录，程序启动文件在此目录
drwxr-xr-x@ 11 simon  staff   352B Feb 12 09:47 config   // 配置文件目录
drwxr-xr-x   3 simon  staff    96B Feb 12 09:38 data     // 数据存放目录
drwxr-xr-x@ 42 simon  staff   1.3K Jan 24 19:29 lib      // 第三方库目录
drwxr-xr-x@  9 simon  staff   288B Feb 12 09:38 logs     // 日志存放目录
drwxr-xr-x@ 29 simon  staff   928B Jan 24 19:29 modules  // 模块目录
drwxr-xr-x@  2 simon  staff    64B Jan 24 19:29 plugins  // 插件目录
</code></pre></div><h3 id="启动"><a href="#启动" aria-hidden="true" class="header-anchor">#</a> 启动</h3> <p>在<code>bin</code>目录在命令行执行<code>./elasticsearch</code>，看到命令行中有started字样，说明服务已启动，加入<code>-d</code> 参数，服务将会以守护进程启动；在命令行输入<code>curl http:localhost:9200</code>，命令行将会得到如下的JSON数据，说明服务可以正常使用</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;XUurDBx&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;cluster_name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;elasticsearch&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;cluster_uuid&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;YZfq31QXQEGnFGYEWuK7SQ&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;version&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;number&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;6.6.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build_flavor&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;default&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;tar&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build_hash&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;a9861f4&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build_date&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;2019-01-24T11:27:09.439740Z&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build_snapshot&quot;</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lucene_version&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;7.6.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;minimum_wire_compatibility_version&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;5.6.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;minimum_index_compatibility_version&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;5.0.0&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tagline&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;You Know, for Search&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="ui界面管理插件"><a href="#ui界面管理插件" aria-hidden="true" class="header-anchor">#</a> UI界面管理插件</h3> <p>为了可视化管理es中的数据，在github上有一个插件<a href="https://github.com/mobz/elasticsearch-head" target="_blank" rel="noopener noreferrer">elasticsearch-head<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，该插件是使用前端技术构建的一个可视化界面管理工具。按照github上面的文档即可运行起来，运行起来后，在浏览器访问对应的地址就可以访问可视化界面了</p> <h3 id="elasticsearch-head的google插件"><a href="#elasticsearch-head的google插件" aria-hidden="true" class="header-anchor">#</a> elasticsearch-head的google插件</h3> <p>之前这种下载源码的方式比较繁琐，这里提供一种简便的方式</p> <p>先去<a href="https://chrome.google.com/webstore/category/extensions?hl=zh-CN" target="_blank" rel="noopener noreferrer">google插件商店<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>搜索<code>elasticsearch-head</code>，下载插件</p> <p>下载好之后，点击插件处的elasticsearch-head的图标，就会行打开一个页面，这个页面和上一种方式的页面
是一样的，界面如图
<img src="/blog-src/dist/assets/img/headPlugin.ae82c7af.jpg" alt="head插件可视化界面"></p> <h2 id="分布式配置"><a href="#分布式配置" aria-hidden="true" class="header-anchor">#</a> 分布式配置</h2> <p>首先修改我们之前的服务的配置文件<code>config/elasticsearch.yml</code></p> <h3 id="主节点配置"><a href="#主节点配置" aria-hidden="true" class="header-anchor">#</a> 主节点配置</h3> <p>这个是master节点的配置，在文件最后加入如下的配置</p> <div class="language-txt extra-class"><pre class="language-text"><code>http.cors.enabled: true    // 设置是否可以跨域访问
http.cors.allow-origin: &quot;*&quot;   // 设置任何域名都可以访问

cluster.name: test   // 设置集群名
node.name: master    // 设置节点名
node.master: true    // 设置是否为主节点

network.host: 127.0.0.1   // 设置提供访问的ip
</code></pre></div><p>重启之前的服务，在命令行执行<code>curl http://localhost:9200</code>，
即可得到如下结果，name和cluster_name都变成了我们设置的名字</p> <div class="language-JSON extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;master&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;cluster_name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;cluster_uuid&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;YZfq31QXQEGnFGYEWuK7SQ&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;version&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;number&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;6.6.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build_flavor&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;default&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;tar&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build_hash&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;a9861f4&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build_date&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;2019-01-24T11:27:09.439740Z&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build_snapshot&quot;</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lucene_version&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;7.6.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;minimum_wire_compatibility_version&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;5.6.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;minimum_index_compatibility_version&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;5.0.0&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tagline&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;You Know, for Search&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="从节点配置"><a href="#从节点配置" aria-hidden="true" class="header-anchor">#</a> 从节点配置</h3> <p>由于本地开发环境只有一台机器，所以使用不同端口号来实现从节点的配置</p> <div class="language-txt extra-class"><pre class="language-text"><code>cluster.name: test   // 设置集群名,此名称必须和主节点的名称保持一致 
node.name: slave1    // 设置节点名

network.host: 127.0.0.1   // 设置提供访问的ip
// 不配置端口号的情况默认会是用9200，由于主节点是没配置的，所以从节点需要配置一个另外的端口
// 生产环境多台机器的情况下，配置不同的访问ip即可
http.port: 9201   

// 指定主节点的ip地址
discovery.zen.ping.unicast.hosts: [&quot;127.0.0.1&quot;]
</code></pre></div><p>这样就是实现了ElasticSearch的扩容</p> <h2 id="基础概念"><a href="#基础概念" aria-hidden="true" class="header-anchor">#</a> 基础概念</h2> <ol><li>集群和节点</li></ol> <p>一个集群是由一个或多个es节点组成的，每个节点都有自己的节点名称和同样的集群名字，节点可以存储数据、参与集群索引数据、搜索数据</p> <ol start="2"><li>索引</li></ol> <p>含有相同属性的文档集合，表示一类相同类型的数据，比如用户信息数据是一个索引，产品数据是一个索引</p> <ol start="3"><li>类型</li></ol> <p>索引可以定义一个或者多个类型，文档必须属于一个类型</p> <ol start="4"><li>文档</li></ol> <p>文档是可以被索引的基本数据单位，比如一个用户的信息</p> <ol start="5"><li><p>分片
每个索引都有多个分片，每个分片是一个lucene索引，分片只能在创建索引时指定，创建之后不能修改</p></li> <li><p>备份
拷贝一份分片就完成了分片的备份，备份在创建索引时需要指定，后期也可以修改</p></li></ol> <h2 id="基本用法"><a href="#基本用法" aria-hidden="true" class="header-anchor">#</a> 基本用法</h2> <p>ElasticSearch的API风格是RESTFul，调用api的基本格式如下</p> <div class="language- extra-class"><pre class="language-text"><code>http://&lt;ip&gt;:&lt;port&gt;/&lt;索引&gt;/&lt;类型&gt;/&lt;文档ID&gt;
</code></pre></div><p>RESTFul风格的API会使用到这几种http请求方式</p> <ul><li>GET</li> <li>POST</li> <li>PUT</li> <li>DELETE</li></ul> <h3 id="创建索引"><a href="#创建索引" aria-hidden="true" class="header-anchor">#</a> 创建索引</h3> <p>索引分结构化和非结构化两种，他们的区别就是索引信息中的mappings字段，非结构化索引这个字段是一个空对象</p> <p>之前的head插件创建的索引，查看索引信息的时候，可以知道是非结构化的索引</p> <h4 id="结构化索引创建"><a href="#结构化索引创建" aria-hidden="true" class="header-anchor">#</a> 结构化索引创建</h4> <p>这里使用postman工具来调用api来创建一个结构化索引</p> <p>通过postman请求<code>http://127.0.0.1:9200/people</code>，请求方式为PUT，创建一个结构化的索引</p> <p>请求体的json数据如下</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;settings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;number_of_shards&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> // 指定索引的分片数
		<span class="token property">&quot;number_of_replicas&quot;</span><span class="token operator">:</span> <span class="token number">1</span> // 设置分片的备份数
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    // 定义索引的结构映射
	<span class="token property">&quot;mappings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;man&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token property">&quot;properties&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token property">&quot;country&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;keyword&quot;</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token property">&quot;age&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;integer&quot;</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token property">&quot;date&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;date&quot;</span><span class="token punctuation">,</span>
					<span class="token property">&quot;format&quot;</span><span class="token operator">:</span> <span class="token string">&quot;yyyy-MM-dd HH:mm:ss||yyyy-MM-dd||epoch_millis&quot;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>提交请求后，得到如下如下响应说明创建索引成功</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;acknowledged&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;shards_acknowledged&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;people&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="数据插入"><a href="#数据插入" aria-hidden="true" class="header-anchor">#</a> 数据插入</h3> <p>数据插入有两种方式：</p> <ol><li>指定文档id插入</li> <li>自动产生文档id插入
id是一个文档数据的唯一标记，和mysql中的主键id是相似的</li></ol> <h4 id="指定文档id插入"><a href="#指定文档id插入" aria-hidden="true" class="header-anchor">#</a> 指定文档id插入</h4> <p>使用put方式请求地址<code>http://127.0.0.1:9200/people/man/1</code></p> <p>请求体数据如下</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test1&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;country&quot;</span><span class="token operator">:</span> <span class="token string">&quot;China&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;age&quot;</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
	<span class="token property">&quot;date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-02-01&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>得到如下响应，result为created，说明创建文档成功</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;people&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;man&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_version&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;result&quot;</span><span class="token operator">:</span> <span class="token string">&quot;created&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_shards&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token property">&quot;successful&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token property">&quot;failed&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_seq_no&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_primary_term&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="自动产生文档id插入"><a href="#自动产生文档id插入" aria-hidden="true" class="header-anchor">#</a> 自动产生文档id插入</h4> <p>使用post方式请求地址<code>http://127.0.0.1:9200/people/man/</code>，需要去掉携带的id</p> <p>请求体数据如下</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test2&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;country&quot;</span><span class="token operator">:</span> <span class="token string">&quot;China&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;age&quot;</span><span class="token operator">:</span> <span class="token number">40</span><span class="token punctuation">,</span>
	<span class="token property">&quot;date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-02-01&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>得到如下响应，result为created，说明创建文档成功，并且可以看到_id的值是一段ElasticSearch自动帮我们生成的，</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;people&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;man&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;uqQa4mgBZ6y0pzcw4UAj&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_version&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;result&quot;</span><span class="token operator">:</span> <span class="token string">&quot;created&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_shards&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token property">&quot;successful&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token property">&quot;failed&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_seq_no&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_primary_term&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="数据修改"><a href="#数据修改" aria-hidden="true" class="header-anchor">#</a> 数据修改</h3> <p>修改上面创建id为1的数据</p> <p>使用post方式请求地址<code>http://127.0.0.1:9200/people/man/1/_update</code></p> <p>请求体数据如下</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;doc&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test33333&quot;</span>  //  修改name的值
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>得到如下响应，result为updated，说明更新文档成功</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;people&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;man&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_version&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">&quot;result&quot;</span><span class="token operator">:</span> <span class="token string">&quot;updated&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_shards&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token property">&quot;successful&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token property">&quot;failed&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_seq_no&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_primary_term&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="数据删除"><a href="#数据删除" aria-hidden="true" class="header-anchor">#</a> 数据删除</h3> <p>索引和文档都可以被删除，索引一旦删除，该索引下的文档都会被删除</p> <h4 id="文档删除"><a href="#文档删除" aria-hidden="true" class="header-anchor">#</a> 文档删除</h4> <p>删除之前id为1的文档数据</p> <p>使用delete方式请求地址<code>http://127.0.0.1:9200/people/man/1</code></p> <p>得到如下响应，result为deleted，说明id为1的文档删除成功</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;people&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;man&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_version&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    <span class="token property">&quot;result&quot;</span><span class="token operator">:</span> <span class="token string">&quot;deleted&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_shards&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token property">&quot;successful&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token property">&quot;failed&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_seq_no&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_primary_term&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="索引删除"><a href="#索引删除" aria-hidden="true" class="header-anchor">#</a> 索引删除</h4> <p>删除之前创建的people索引</p> <p>使用delete方式请求地址<code>http://127.0.0.1:9200/people</code></p> <p>得到如下响应，说明索引删除成功</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;acknowledged&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="数据查询"><a href="#数据查询" aria-hidden="true" class="header-anchor">#</a> 数据查询</h3> <p>有三种类型的查询</p> <ol><li>简单查询</li> <li>条件查询</li> <li>聚合查询</li></ol> <h4 id="简单查询"><a href="#简单查询" aria-hidden="true" class="header-anchor">#</a> 简单查询</h4> <p>简单查询是通过id来查找数据的，首先需要创建一个book索引做测试，索引的结构如下，按照之前的方式创建book索引，随便加入几条数据用于测试</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;settings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;number_of_shards&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;number_of_replicas&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token property">&quot;mappings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;novel&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token property">&quot;properties&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token property">&quot;date&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token property">&quot;format&quot;</span><span class="token operator">:</span> <span class="token string">&quot;yyyy-MM-dd HH:mm:ss||yyyy-MM-dd||epoch_millis&quot;</span><span class="token punctuation">,</span>
					<span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;date&quot;</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;integer&quot;</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;keyword&quot;</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;date&quot;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>使用postman工具，请求<code>http://127.0.0.1:9200/book/novel/1</code>,请求方式为get，就可以获取到id为1的数据</p> <p>响应结果如下，id为1的数据就在_source字段中</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_version&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_seq_no&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_primary_term&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;found&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;谁谁谁&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;测试小说1&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
        <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-02-01&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="条件查询"><a href="#条件查询" aria-hidden="true" class="header-anchor">#</a> 条件查询</h4> <p>条件查询使用的是post方式，查询条件是使用json字符串来描述</p> <p>使用postman工具，请求<code>http://127.0.0.1:9200/book/_search</code>,请求方式为post</p> <p>请求体如下</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        // 匹配所有数据
		<span class="token property">&quot;match_all&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			
		<span class="token punctuation">}</span>	
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>响应结果，数据都在hits字段中，total表示数据的总数，里面的hits是所有找到的数据</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;took&quot;</span><span class="token operator">:</span> <span class="token number">14</span><span class="token punctuation">,</span>
    <span class="token property">&quot;timed_out&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_shards&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token property">&quot;successful&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token property">&quot;skipped&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;failed&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;hits&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
        <span class="token property">&quot;max_score&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token property">&quot;hits&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;谁谁谁&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;恐怖小说1&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10020</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-02-01&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;谁谁谁&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;推理小说1&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10020</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-02-01&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;谁谁谁&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;推理小说2&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10020</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-02-01&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;6&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;谁谁谁&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;推理小说3&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10020</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-02-01&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;7&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;谁谁谁&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;推理小说4&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10020</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-02-01&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;8&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;谁谁谁&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;推理小说5&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10020</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-02-01&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;谁谁谁&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;测试小说1&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-02-01&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;谁谁谁&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;恐怖小说2&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10020</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-02-01&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;9&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;谁谁谁&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;推理小说6&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10020</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-02-01&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;谁谁谁&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;推理小说7&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10020</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-02-01&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="分页查询"><a href="#分页查询" aria-hidden="true" class="header-anchor">#</a> 分页查询</h4> <p>正常情况我们不会去查询整个索引的所有数据，下面来对查询条件进行一点修改</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;match_all&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token property">&quot;from&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>   // 从第几条数据开始
	<span class="token property">&quot;size&quot;</span><span class="token operator">:</span> <span class="token number">1</span>    // 获取几条数据
<span class="token punctuation">}</span>
</code></pre></div><p>获取响应如下，可以看到只获取了第一条数据，就是之前查询到的第一条数据，这样就可以使用from和size来对数据进行分页查询</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;took&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token property">&quot;timed_out&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_shards&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token property">&quot;successful&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token property">&quot;skipped&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;failed&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;hits&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
        <span class="token property">&quot;max_score&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token property">&quot;hits&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;谁谁谁&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;恐怖小说1&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10020</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-02-01&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="字段匹配查询"><a href="#字段匹配查询" aria-hidden="true" class="header-anchor">#</a> 字段匹配查询</h4> <p>接下来在再对请求体的内容做如下修改，让其对title字段去做匹配</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;match&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;推理&quot;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>响应如下，看到查询到了两条结果</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;took&quot;</span><span class="token operator">:</span> <span class="token number">26</span><span class="token punctuation">,</span>
    <span class="token property">&quot;timed_out&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_shards&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token property">&quot;successful&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token property">&quot;skipped&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;failed&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;hits&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token property">&quot;max_score&quot;</span><span class="token operator">:</span> <span class="token number">2.7725887</span><span class="token punctuation">,</span>
        <span class="token property">&quot;hits&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">2.7725887</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;谁谁谁&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;恐怖小说1&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10020</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-02-01&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">2.4079456</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;谁谁谁&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;恐怖小说2&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10020</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-02-01&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="对匹配到的数据进行排序"><a href="#对匹配到的数据进行排序" aria-hidden="true" class="header-anchor">#</a> 对匹配到的数据进行排序</h5> <p>对请求体内容做如下修改，</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;match&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;恐怖&quot;</span>
		<span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    // _id字段降序排序
	<span class="token property">&quot;sort&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token punctuation">{</span>
			<span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">&quot;order&quot;</span><span class="token operator">:</span><span class="token string">&quot;DESC&quot;</span><span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>响应如下，可以看到第一条数据是_id为3的数据</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;took&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token property">&quot;timed_out&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_shards&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token property">&quot;successful&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token property">&quot;skipped&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;failed&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;hits&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token property">&quot;max_score&quot;</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>
        <span class="token property">&quot;hits&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;谁谁谁&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;恐怖小说2&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10020</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-02-01&quot;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token property">&quot;sort&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                    <span class="token string">&quot;3&quot;</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;谁谁谁&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;恐怖小说1&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10020</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-02-01&quot;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token property">&quot;sort&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                    <span class="token string">&quot;2&quot;</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="聚合查询"><a href="#聚合查询" aria-hidden="true" class="header-anchor">#</a> 聚合查询</h4> <p>聚合查询可以对匹配到的数据进行分组统计和以下几种计算</p> <ol><li>count：总数统计</li> <li>min：取最小值</li> <li>max：取最大值</li> <li>avg：求平均值计算</li> <li>sum：求和计算</li></ol> <h5 id="分组统计"><a href="#分组统计" aria-hidden="true" class="header-anchor">#</a> 分组统计</h5> <p>使用postman工具请求<code>http://127.0.0.1:9200/book/_search</code>，请求方式为post</p> <p>请求体内容如下</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;aggs&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        // 对word_count字段gruop_by查询
		<span class="token property">&quot;group_by_word_count&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token property">&quot;terms&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token property">&quot;field&quot;</span><span class="token operator">:</span> <span class="token string">&quot;word_count&quot;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>响应结果，分组统计只有一个总数统计，</p> <div class="language-json extra-class"><pre class="language-json"><code>// 响应中包含这个字段，其它字段这里不展示
 <span class="token property">&quot;aggregations&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;group_by_word_count&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;doc_count_error_upper_bound&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;sum_other_doc_count&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;buckets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            // 可以看到，word_count为<span class="token number">10020</span>的有<span class="token number">9</span>条数据
            // word_count10000的有一条数据
            <span class="token punctuation">{</span>
                <span class="token property">&quot;key&quot;</span><span class="token operator">:</span> <span class="token number">10020</span><span class="token punctuation">,</span>
                <span class="token property">&quot;doc_count&quot;</span><span class="token operator">:</span> <span class="token number">9</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;key&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
                <span class="token property">&quot;doc_count&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="五种函数计算"><a href="#五种函数计算" aria-hidden="true" class="header-anchor">#</a> 五种函数计算</h5> <p>请求体内容如下</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;aggs&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        // 对word_count进行五种函数的计算
		<span class="token property">&quot;grades_word_count&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token property">&quot;stats&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token property">&quot;field&quot;</span><span class="token operator">:</span> <span class="token string">&quot;word_count&quot;</span>
			<span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        // 这是指定使用哪种函数计算的写法
		//<span class="token property">&quot;grades_word_count&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        //  <span class="token string">&quot;min&quot;</span>表示使用哪种计算    
		//	<span class="token property">&quot;min&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		//		<span class="token property">&quot;field&quot;</span><span class="token operator">:</span> <span class="token string">&quot;word_count&quot;</span>
		//	<span class="token punctuation">}</span>
		//<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>不指定函数的响应结果</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;aggregations&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;grades_word_count&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;count&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>   // 总数
        <span class="token property">&quot;min&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>  // 最小值
        <span class="token property">&quot;max&quot;</span><span class="token operator">:</span> <span class="token number">10020</span><span class="token punctuation">,</span>  // 最大值
        <span class="token property">&quot;avg&quot;</span><span class="token operator">:</span> <span class="token number">10018</span><span class="token punctuation">,</span>  // 平均值
        <span class="token property">&quot;sum&quot;</span><span class="token operator">:</span> <span class="token number">100180</span>  // 求和
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>指定函数的响应结果</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;aggregations&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;grades_word_count&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token number">10000</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="高级查询"><a href="#高级查询" aria-hidden="true" class="header-anchor">#</a> 高级查询</h2> <p>高级查询分为</p> <ul><li>子条件查询：特定字段查询所指特定值</li> <li>复合条件查询：以一定逻辑组合子条件查询</li></ul> <h3 id="子条件查询"><a href="#子条件查询" aria-hidden="true" class="header-anchor">#</a> 子条件查询</h3> <p>子条件查询又有Query Contex和Filter Context</p> <ul><li>Query Context：查询过程，除了会判断文档是否满足条件外，es还会计算一个_score分数值来标识匹配的程度</li> <li>Filter Context: 查询过程，只判断该文档是否满足条件，只有yes或者no，filter的数据相比Query Context，es会对Filter Context查询的数据进行缓存</li></ul> <h4 id="单字段匹配查询"><a href="#单字段匹配查询" aria-hidden="true" class="header-anchor">#</a> 单字段匹配查询</h4> <p>使用postman工具请求<code>http://127.0.0.1:9200/book/_search</code>，请求方式为post</p> <p>请求体的数据如下</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        // match中只支持一个字段的匹配
		<span class="token property">&quot;match&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;elasticsearch入门&quot;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>响应结果如下</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;took&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token property">&quot;timed_out&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_shards&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token property">&quot;successful&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token property">&quot;skipped&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;failed&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;hits&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token property">&quot;max_score&quot;</span><span class="token operator">:</span> <span class="token number">6.0044813</span><span class="token punctuation">,</span>
        <span class="token property">&quot;hits&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;11&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">6.0044813</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;elasticsearch入门&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eva&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2018-06-20&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;17&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">3.683673</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;javascript入门&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;necolas&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2014-09-03&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10000</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;12&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">1.5404451</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;elasticsearch权威指南&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eva&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">100000</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2018-06-20&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>由结果可以看出，数据返回了<code>elasticsearch</code>和<code>入门</code>相关的数据，实际我们只想匹配elasticsearch入门相关的数据，这就是它的缺陷</p> <p>我们想让他不会按照上面那种方式查询，需要对查询条件进行一点改进</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;match_phrase&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;elasticsearch入门&quot;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>响应结果如下，结果中就没有返回title为elasticsearch权威指南的那条数据了</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;took&quot;</span><span class="token operator">:</span> <span class="token number">35</span><span class="token punctuation">,</span>
    <span class="token property">&quot;timed_out&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_shards&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token property">&quot;successful&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token property">&quot;skipped&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;failed&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;hits&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token property">&quot;max_score&quot;</span><span class="token operator">:</span> <span class="token number">6.2240067</span><span class="token punctuation">,</span>
        <span class="token property">&quot;hits&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;11&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">6.2240067</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;elasticsearch入门&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eva&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2018-06-20&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="多字段匹配查询"><a href="#多字段匹配查询" aria-hidden="true" class="header-anchor">#</a> 多字段匹配查询</h4> <p>修改请求体内容如下</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        // 多字段匹配
		<span class="token property">&quot;multi_match&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            // 查询的关键字
            <span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token string">&quot;jackson&quot;</span><span class="token punctuation">,</span>
            // 所要查找的字段
			<span class="token property">&quot;fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
				<span class="token string">&quot;author&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;title&quot;</span>
			<span class="token punctuation">]</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>响应结果如下</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;took&quot;</span><span class="token operator">:</span> <span class="token number">35</span><span class="token punctuation">,</span>
    <span class="token property">&quot;timed_out&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_shards&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token property">&quot;successful&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token property">&quot;skipped&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;failed&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;hits&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token property">&quot;max_score&quot;</span><span class="token operator">:</span> <span class="token number">1.89712</span><span class="token punctuation">,</span>
        <span class="token property">&quot;hits&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;20&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">1.89712</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;search Engine解析 jackson出品 必属精品&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;jackson&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2014-09-03&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10000</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;16&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">1.0296195</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;php7源码解析&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;jackson&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">300000</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2016-07-20&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;15&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">1.0296195</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;php7权威指南&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;jackson&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">200000</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2016-07-20&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="语法查询"><a href="#语法查询" aria-hidden="true" class="header-anchor">#</a> 语法查询</h4> <p>语法查询的条件表达很丰富，有通配符、范围查询、正则表达式等</p> <p>请求体内容如下</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;query_string&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Elasticsearch OR 入门 OR 权威指南 OR jackson&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>响应结果，可以看到字段包含了上面4种情况的数据都会被查找出来</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;took&quot;</span><span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span>
    <span class="token property">&quot;timed_out&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_shards&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token property">&quot;successful&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token property">&quot;skipped&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;failed&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;hits&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>
        <span class="token property">&quot;max_score&quot;</span><span class="token operator">:</span> <span class="token number">6.890944</span><span class="token punctuation">,</span>
        <span class="token property">&quot;hits&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;11&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">6.890944</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;elasticsearch入门&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eva&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2018-06-20&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;12&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">5.658923</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;elasticsearch权威指南&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eva&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">100000</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2018-06-20&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;15&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">5.148097</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;php7权威指南&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;jackson&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">200000</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2016-07-20&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;17&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">3.683673</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;javascript入门&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;necolas&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2014-09-03&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10000</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;20&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">1.89712</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;search Engine解析 jackson出品 必属精品&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;jackson&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2014-09-03&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10000</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;16&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">1.0296195</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;php7源码解析&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;jackson&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">300000</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2016-07-20&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>再对请求体内容做如下改动</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;query_string&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Elasticsearch OR 入门 OR 权威指南 OR jackson&quot;</span><span class="token punctuation">,</span>
            // 限定title字段，可以设置多个值进行查询
			<span class="token property">&quot;fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">]</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>响应如下，相比上面，可以看到少了一条数据</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;took&quot;</span><span class="token operator">:</span> <span class="token number">19</span><span class="token punctuation">,</span>
    <span class="token property">&quot;timed_out&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_shards&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token property">&quot;successful&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token property">&quot;skipped&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;failed&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;hits&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
        <span class="token property">&quot;max_score&quot;</span><span class="token operator">:</span> <span class="token number">6.890944</span><span class="token punctuation">,</span>
        <span class="token property">&quot;hits&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;11&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">6.890944</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;elasticsearch入门&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eva&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2018-06-20&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;12&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">5.658923</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;elasticsearch权威指南&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eva&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">100000</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2018-06-20&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;15&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">4.118478</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;php7权威指南&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;jackson&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">200000</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2016-07-20&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;17&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">3.683673</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;javascript入门&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;necolas&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2014-09-03&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10000</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;20&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">1.3060067</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;search Engine解析 jackson出品 必属精品&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;jackson&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2014-09-03&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10000</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>以上查询都是针对字段是文本类型的，下面介绍结构化字段的查询，如数字类型、日期类型等</p> <p>请求提内容如下</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        // term只支持一个字段条件匹配
		<span class="token property">&quot;term&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            // word_count为<span class="token number">10000</span>个字符的
			<span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10000</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>响应如下</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;took&quot;</span><span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
    <span class="token property">&quot;timed_out&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_shards&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token property">&quot;successful&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token property">&quot;skipped&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;failed&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;hits&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
        <span class="token property">&quot;max_score&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token property">&quot;hits&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;11&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;elasticsearch入门&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eva&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2018-06-20&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;18&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;elastic&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;necolas&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2014-09-03&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10000</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;20&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;search Engine解析 jackson出品 必属精品&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;jackson&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2014-09-03&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10000</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;14&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;高性能javascript（第二版）&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;necolas&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2016-07-20&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;17&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;javascript入门&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;necolas&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2014-09-03&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10000</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;谁谁谁&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;测试小说1&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-02-01&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;19&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;search&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;necolas&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2014-09-03&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10000</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如果想使用一个限定范围（也可用于日期范围的限定），也是可以的，请求体修改如下</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;range&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                // gte表示大于等于一个值，去掉e将变成大于
                <span class="token property">&quot;gte&quot;</span><span class="token operator">:</span> <span class="token number">9000</span><span class="token punctuation">,</span>
                // lte表示小于等于一个值，去掉e将变成小于
				<span class="token property">&quot;lte&quot;</span><span class="token operator">:</span> <span class="token number">10000</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>响应结果如下</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;took&quot;</span><span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
    <span class="token property">&quot;timed_out&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_shards&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token property">&quot;successful&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token property">&quot;skipped&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;failed&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;hits&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
        <span class="token property">&quot;max_score&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token property">&quot;hits&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;13&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;高性能javascript（第一版）&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;necolas&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">9000</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2015-07-20&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;11&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;elasticsearch入门&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eva&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2018-06-20&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;18&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;elastic&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;necolas&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2014-09-03&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10000</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;20&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;search Engine解析 jackson出品 必属精品&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;jackson&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2014-09-03&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10000</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;14&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;高性能javascript（第二版）&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;necolas&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2016-07-20&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;17&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;javascript入门&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;necolas&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2014-09-03&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10000</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;谁谁谁&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;测试小说1&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-02-01&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;19&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;search&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;necolas&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2014-09-03&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10000</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>上面都是针对Query Context的例子，下面举例Filter Context的例子，请求体内容如下</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        // 限定word_count为<span class="token number">9000</span>字符数
		<span class="token property">&quot;bool&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token property">&quot;filter&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token property">&quot;term&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">9000</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>响应如下</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;took&quot;</span><span class="token operator">:</span> <span class="token number">51</span><span class="token punctuation">,</span>
    <span class="token property">&quot;timed_out&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_shards&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token property">&quot;successful&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token property">&quot;skipped&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;failed&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;hits&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token property">&quot;max_score&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;hits&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;13&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;高性能javascript（第一版）&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;necolas&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">9000</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2015-07-20&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="复合条件查询"><a href="#复合条件查询" aria-hidden="true" class="header-anchor">#</a> 复合条件查询</h3> <p>这里介绍两种常用查询</p> <ol><li>固定分数查询</li> <li>布尔查询</li></ol> <h4 id="固定分数查询"><a href="#固定分数查询" aria-hidden="true" class="header-anchor">#</a> 固定分数查询</h4> <p>查询的结果的_score分数都是根据es自身的算法去生成的，下面的查询语法可以指定最后得到的_score分数</p> <p>使用postman工具请求<code>http://127.0.0.1:9200/book/_search</code>，请求方式为post</p> <p>请求体的数据如下</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;constant_score&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token property">&quot;filter&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token property">&quot;match&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;elasticSearch&quot;</span>
				<span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            // 设置匹配到的结果的_score为<span class="token number">2</span>
			<span class="token property">&quot;boost&quot;</span><span class="token operator">:</span> <span class="token number">2</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>响应如下，可以看到，结果中的_score都为2</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;took&quot;</span><span class="token operator">:</span> <span class="token number">15</span><span class="token punctuation">,</span>
    <span class="token property">&quot;timed_out&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_shards&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token property">&quot;successful&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token property">&quot;skipped&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;failed&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;hits&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token property">&quot;max_score&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token property">&quot;hits&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;11&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;elasticsearch入门&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eva&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2018-06-20&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;12&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;elasticsearch权威指南&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eva&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">100000</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2018-06-20&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="布尔查询"><a href="#布尔查询" aria-hidden="true" class="header-anchor">#</a> 布尔查询</h4> <p>布尔查询可以使用如下三种方式</p> <ol><li>should：其中一个条件匹配了就算匹配成功</li> <li>must: 每个条件都符合才会匹配成功</li> <li>must_not: 排除掉匹配到的结果，多个条件的话，会按照should的规则匹配，再排除掉这些匹配的结果</li></ol> <p>bool查询是可以搭配Filter Context进行查询的，搭配filter的效果只有must是将filter的条件也是同时复合，才算是匹配的结果，must_not和</p> <p>请求体的数据如下</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;bool&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token property">&quot;should&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
				<span class="token punctuation">{</span>
					<span class="token property">&quot;match&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
						<span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;necolas&quot;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token punctuation">{</span>
					<span class="token property">&quot;match&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
						<span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;javascript&quot;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token property">&quot;filter&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token property">&quot;range&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
						<span class="token property">&quot;gte&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2015-07-01&quot;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>响应结果如下，从结果可以看出，bool和filter中的条件是或的关系，只有是must的时候条件才会是且的关系</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;took&quot;</span><span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
    <span class="token property">&quot;timed_out&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_shards&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token property">&quot;successful&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token property">&quot;skipped&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;failed&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;hits&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span>
        <span class="token property">&quot;max_score&quot;</span><span class="token operator">:</span> <span class="token number">3.0515084</span><span class="token punctuation">,</span>
        <span class="token property">&quot;hits&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;13&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">3.0515084</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;高性能javascript（第一版）&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;necolas&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">9000</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2015-07-20&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;14&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">1.9144487</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;高性能javascript（第二版）&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;necolas&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2016-07-20&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;谁谁谁&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;恐怖小说1&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10020</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-02-01&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;谁谁谁&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;推理小说1&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10020</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-02-01&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;谁谁谁&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;推理小说2&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10020</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-02-01&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;6&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;谁谁谁&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;推理小说3&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10020</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-02-01&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;7&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;谁谁谁&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;推理小说4&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10020</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-02-01&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;11&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;elasticsearch入门&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eva&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2018-06-20&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;8&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;谁谁谁&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;推理小说5&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">10020</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-02-01&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;novel&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;16&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;php7源码解析&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;jackson&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;word_count&quot;</span><span class="token operator">:</span> <span class="token number">300000</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;publish_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2016-07-20&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="结语"><a href="#结语" aria-hidden="true" class="header-anchor">#</a> 结语</h2> <p>elasticsearch的安装和基本使用介绍完毕，不同的后台语言都是可以通过调用es的API来轻松构建一个全文搜索应用</p></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/blog-src/dist/assets/js/4.32ab6617.js" defer></script><script src="/blog-src/dist/assets/js/app.2dbcb048.js" defer></script>
  </body>
</html>
