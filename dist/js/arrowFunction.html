<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>函数 | Simon&#39;s Blog</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/blog-src/dist/assets/css/styles.2dbcb048.css" as="style"><link rel="preload" href="/blog-src/dist/assets/js/app.2dbcb048.js" as="script"><link rel="preload" href="/blog-src/dist/assets/js/5.96e052de.js" as="script"><link rel="prefetch" href="/blog-src/dist/assets/css/3.styles.6d42e6eb.css"><link rel="prefetch" href="/blog-src/dist/assets/css/7.styles.d8aa6043.css"><link rel="prefetch" href="/blog-src/dist/assets/js/1.ef6d7d82.js"><link rel="prefetch" href="/blog-src/dist/assets/js/10.cac893df.js"><link rel="prefetch" href="/blog-src/dist/assets/js/11.b4626fbc.js"><link rel="prefetch" href="/blog-src/dist/assets/js/12.d99d2c43.js"><link rel="prefetch" href="/blog-src/dist/assets/js/13.2381fb66.js"><link rel="prefetch" href="/blog-src/dist/assets/js/14.6d193fd5.js"><link rel="prefetch" href="/blog-src/dist/assets/js/15.5b7fb46a.js"><link rel="prefetch" href="/blog-src/dist/assets/js/16.a403d1c9.js"><link rel="prefetch" href="/blog-src/dist/assets/js/17.b8a3de27.js"><link rel="prefetch" href="/blog-src/dist/assets/js/18.a034bb59.js"><link rel="prefetch" href="/blog-src/dist/assets/js/19.ca46936d.js"><link rel="prefetch" href="/blog-src/dist/assets/js/2.f20ba5be.js"><link rel="prefetch" href="/blog-src/dist/assets/js/20.ed0a211c.js"><link rel="prefetch" href="/blog-src/dist/assets/js/3.6d42e6eb.js"><link rel="prefetch" href="/blog-src/dist/assets/js/4.32ab6617.js"><link rel="prefetch" href="/blog-src/dist/assets/js/6.deed1cda.js"><link rel="prefetch" href="/blog-src/dist/assets/js/7.d8aa6043.js"><link rel="prefetch" href="/blog-src/dist/assets/js/8.a718645b.js"><link rel="prefetch" href="/blog-src/dist/assets/js/9.91e3b67c.js">
    <link rel="stylesheet" href="/blog-src/dist/assets/css/3.styles.6d42e6eb.css"><link rel="stylesheet" href="/blog-src/dist/assets/css/7.styles.d8aa6043.css"><link rel="stylesheet" href="/blog-src/dist/assets/css/styles.2dbcb048.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog-src/dist/" class="home-link router-link-active"><!----> <span class="site-name">Simon's Blog</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog-src/dist/js/" class="nav-link router-link-active">js</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog-src/dist/mysql/" class="nav-link">mysql</a></li><li class="dropdown-item"><!----> <a href="/blog-src/dist/elasticsearch/" class="nav-link">elasticsearch</a></li><li class="dropdown-item"><!----> <a href="/blog-src/dist/redis/" class="nav-link">redis</a></li><li class="dropdown-item"><!----> <a href="/blog-src/dist/nginx/" class="nav-link">nginx</a></li><li class="dropdown-item"><!----> <a href="/blog-src/dist/swoole/" class="nav-link">swoole</a></li><li class="dropdown-item"><!----> <a href="/blog-src/dist/live/" class="nav-link">直播入门</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog-src/dist/js/" class="nav-link router-link-active">js</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog-src/dist/mysql/" class="nav-link">mysql</a></li><li class="dropdown-item"><!----> <a href="/blog-src/dist/elasticsearch/" class="nav-link">elasticsearch</a></li><li class="dropdown-item"><!----> <a href="/blog-src/dist/redis/" class="nav-link">redis</a></li><li class="dropdown-item"><!----> <a href="/blog-src/dist/nginx/" class="nav-link">nginx</a></li><li class="dropdown-item"><!----> <a href="/blog-src/dist/swoole/" class="nav-link">swoole</a></li><li class="dropdown-item"><!----> <a href="/blog-src/dist/live/" class="nav-link">直播入门</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blog-src/dist/js/" class="sidebar-link">es6简介</a></li><li><a href="/blog-src/dist/js/let.html" class="sidebar-link">let和const</a></li><li><a href="/blog-src/dist/js/syntaxSugar.html" class="sidebar-link">es6的语法糖</a></li><li><a href="/blog-src/dist/js/object.html" class="sidebar-link">对象</a></li><li><a href="/blog-src/dist/js/arrowFunction.html" class="active sidebar-link">函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-src/dist/js/arrowFunction.html#函数声明" class="sidebar-link">函数声明</a></li><li class="sidebar-sub-header"><a href="/blog-src/dist/js/arrowFunction.html#函数的本质" class="sidebar-link">函数的本质</a></li><li class="sidebar-sub-header"><a href="/blog-src/dist/js/arrowFunction.html#箭头函数的基本语法" class="sidebar-link">箭头函数的基本语法</a></li></ul></li><li><a href="/blog-src/dist/js/vituralDom.html" class="sidebar-link">虚拟DOM</a></li><li><a href="/blog-src/dist/js/promise.html" class="sidebar-link">什么是promise</a></li><li><a href="/blog-src/dist/js/class.html" class="sidebar-link">es5是如何实现面相对象的</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="函数"><a href="#函数" aria-hidden="true" class="header-anchor">#</a> 函数</h1> <h2 id="函数声明"><a href="#函数声明" aria-hidden="true" class="header-anchor">#</a> 函数声明</h2> <p>函数就是一个可以反复调用的代码块，可以传入参数，可以有返回值</p> <p>声明一个函数有五种方式</p> <p>第一种：这种声明会存在函数提升，即使函数声明代码放在调用函数代码的后面，也是可以的，和变量的声明提升是一样的</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">xxxx</span> <span class="token punctuation">(</span>x1<span class="token punctuation">,</span> x2<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 函数所要执行的代码</span>
<span class="token punctuation">}</span>

<span class="token comment">// 访问函数可以直接使用 xxxx 标志符访问</span>
</code></pre></div><p>第二种：使用一个变量来保存匿名函数</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">x</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>x1<span class="token punctuation">,</span> x2<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 函数所要执行的代码</span>
<span class="token punctuation">}</span>
<span class="token comment">// 访问函数可以通过变量 x 访问</span>
</code></pre></div><p>第三种：第一、二种的结合版</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">x</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">xxx</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 函数所要执行的代码</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p> <p>这种方式还是只能通过 x 来访问函数，不能通过 xxx 访问</p></div> <p>第四种：使用<code>window.Function</code>函数对象定义</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span>x1<span class="token punctuation">,</span> x2<span class="token punctuation">,</span> <span class="token operator">...</span> <span class="token punctuation">,</span> lastone<span class="token punctuation">)</span>
<span class="token comment">// lastone 为函数体所要执行的代码，类型为字符串</span>
<span class="token comment">// 之前传递的参数都是函数定义的参数</span>
</code></pre></div><p>第五种：箭头函数（es6语法）方式</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">x</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x1<span class="token punctuation">,</span> x2<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 函数所要执行代码</span>
<span class="token punctuation">}</span>

<span class="token comment">// 函数体只有一行 return 语句时，可以简写成如下形式</span>
<span class="token keyword">var</span> <span class="token function-variable function">x</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x1<span class="token punctuation">,</span> x2<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> x1 <span class="token operator">+</span> x2 <span class="token operator">+</span> <span class="token operator">...</span><span class="token punctuation">.</span>
<span class="token comment">// 函数参数只有一个时可以简写如下形式</span>
<span class="token keyword">var</span> <span class="token function-variable function">x</span> <span class="token operator">=</span> x1 <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token keyword">return</span> x1 <span class="token operator">*</span> x1
<span class="token punctuation">}</span>
</code></pre></div><h2 id="函数的本质"><a href="#函数的本质" aria-hidden="true" class="header-anchor">#</a> 函数的本质</h2> <p>在浏览器中声明一个函数，打印出来如下
<img src="/blog-src/dist/assets/img/function.ecd909e2.jpg" alt="函数的本质">
由上图可以，函数的本质也是一个对象，有arguments、caller、length、name等属性，对象的原型prototype的指向了Object.prototype，对象的<code>__proto__</code>指向了Function.prototype，这也就是为什么函数可以使用apply，bind，call等方法的原因</p> <p>所以说函数本质上也是一个对象，这个对象的<code>__proto__</code>指向了Function.prototype</p> <p>下面来介绍es6中的箭头函数</p> <h2 id="箭头函数的基本语法"><a href="#箭头函数的基本语法" aria-hidden="true" class="header-anchor">#</a> 箭头函数的基本语法</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span>param1<span class="token punctuation">,</span> param2<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 函数体代码</span>
<span class="token punctuation">}</span>
<span class="token comment">// 当只有一个参数或者函数体只有一条语句则可以这么写</span>
<span class="token keyword">let</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> param1 <span class="token operator">=&gt;</span> 语句
</code></pre></div><p>从上面代码看只是换了一种简洁方式声明一个函数，但是远不止这么简单</p> <h3 id="es6箭头函数解决了什么问题"><a href="#es6箭头函数解决了什么问题" aria-hidden="true" class="header-anchor">#</a> es6箭头函数解决了什么问题</h3> <p>先来看es6之前的函数的一个问题，看如下代码</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">'window'</span>
<span class="token keyword">function</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'obj'</span><span class="token punctuation">,</span>
    getName<span class="token punctuation">:</span> getName 
<span class="token punctuation">}</span>

<span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 等价于window.getName(), this的值是window</span>
obj<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// this的值时obj</span>

getName<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> 
obj<span class="token punctuation">.</span>getName<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span>
</code></pre></div><p>由上面代码可知，函数的this值是有调用的时候决定的，一般是指向<code>.</code>前面那个对象，使用call来调用时，call的第一个参数就是this，call第二个之后的参数都会当做函数调用时的参数。函数里面的<code>this</code>，本质上就是call函数的第一个参数。</p> <p>但是箭头函数是没有上面这个规则的，不管你使用哪种方式调用，我是不管this的，由于函数内是没有this，由于作用域链的关系，会往作用域链上面找，所以会是<code>window</code>对象</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">'window'</span>
<span class="token keyword">let</span> <span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'obj'</span><span class="token punctuation">,</span>
    getName<span class="token punctuation">:</span> getName<span class="token punctuation">,</span>
    getThis<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>

<span class="token comment">// 箭头函数内不存在 this, 就会往作用域上找到this</span>
<span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// window</span>
obj<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// window</span>

getName<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">//window</span>
obj<span class="token punctuation">.</span>getName<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span> <span class="token comment">//window</span>

obj<span class="token punctuation">.</span><span class="token function">getThis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 由作用域链往上找，最终的this就是obj</span>
</code></pre></div><p>总结:</p> <ol><li>箭头函数内不存在<code>this</code>, 需要this的时候会去作用域链的上端找，</li> <li>es6之前的函数声明的<code>this</code>, 使用调用的时候决定，本质上是由call的第一个参数决定的</li></ol></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/blog-src/dist/js/object.html" class="prev">
          对象
        </a></span> <span class="next"><a href="/blog-src/dist/js/vituralDom.html">
          虚拟DOM
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/blog-src/dist/assets/js/5.96e052de.js" defer></script><script src="/blog-src/dist/assets/js/app.2dbcb048.js" defer></script>
  </body>
</html>
