(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{176:function(t,s,n){"use strict";n.r(s);var a=n(0),e=Object(a.a)({},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),n("p",[t._v("维基百科nginx的介绍：")]),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),n("p",[t._v("原因主要有以下三点：")]),t._v(" "),t._m(4),t._v(" "),n("p",[t._v("由于上面这些原因，nginx解决了以下两个问题")]),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),n("ol",[n("li",[n("a",{attrs:{href:"http://nginx.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("开源版nginx"),n("OutboundLink")],1),t._v("：开源免费")]),t._v(" "),n("li",[n("a",{attrs:{href:"https://www.nginx.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("商业版nginx"),n("OutboundLink")],1),t._v("：由nginx作者成立的商业公司管理，不开源，使用需要收费")]),t._v(" "),n("li",[n("a",{attrs:{href:"http://tengine.taobao.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Tengine"),n("OutboundLink")],1),t._v("：由淘宝网发起的一个web服务器开源项目，基于nginx基础上，添加了很多高级功能和特性.Tengine修改了nginx的主干代码，也就不会随着官方的Nginx版本走")]),t._v(" "),n("li",[n("a",{attrs:{href:"https://openresty.org/cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("开源版OpenResty"),n("OutboundLink")],1),t._v("：OpenResty® 是一个基于 Nginx 与 Lua 的高性能 Web 平台，其内部集成了大量精良的 Lua 库、第三方模块以及大多数的依赖项。用于方便地搭建能够处理超高并发、扩展性极高的动态 Web 应用、Web 服务和动态网关。")]),t._v(" "),n("li",[n("a",{attrs:{href:"https://openresty.com/cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("商业版OpenResty"),n("OutboundLink")],1)])]),t._v(" "),n("p",[t._v("选择建议：\n没有复杂的业务诉求情况下，使用1即可，涉及复杂的业务诉求可以选择4")]),t._v(" "),n("hr"),t._v(" "),t._m(11),t._v(" "),n("p",[t._v("除了编译安装，还可以通过工具来安装，如yum(linux)、brew（macOS），这种方式安装起来都便捷，而编译安装很大的好处就是可以自己指定需要安装那些模块")]),t._v(" "),n("p",[t._v("接下来需要下载nginx的源码包，"),n("a",{attrs:{href:"http://nginx.org/en/download.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("nginx.org"),n("OutboundLink")],1),t._v("，也可以是使用curl命令下载文件，生产环境建议使用stable版本，学习用可以使用最新的版本")]),t._v(" "),t._m(12),n("p",[t._v("进入到解压后的目录，执行配置命令")]),t._v(" "),t._m(13),n("p",[t._v("上面命令查看可以使用哪些参数，这些参数大概可以分为三类")]),t._v(" "),t._m(14),t._v(" "),t._m(15),t._m(16),t._v(" "),t._m(17),t._m(18),t._v(" "),n("p",[t._v("接下来进行编译前的配置，指定一个安装目录（macOS系统做测试），命令行执行完成如下")]),t._v(" "),t._m(19),t._m(20),t._v(" "),t._m(21),t._m(22),t._v(" "),t._m(23),t._m(24),t._v(" "),t._m(25),t._v(" "),n("p",[t._v("nginx的配置文件有以下语法规则")]),t._v(" "),t._m(26),t._v(" "),n("p",[t._v("nginx的结构设计是模块化的，一个指令块是由对应的nginx模块去解析并处理的")]),t._v(" "),n("p",[t._v("这里以http指令块来作例子")]),t._v(" "),t._m(27),n("p",[t._v("http指令块主要有以下几部分组成")]),t._v(" "),t._m(28),t._v(" "),t._m(29),t._v(" "),n("p",[t._v("时间单位有八种")]),t._v(" "),t._m(30),t._v(" "),n("p",[t._v("空间单位有四种")]),t._v(" "),t._m(31),t._v(" "),t._m(32),t._v(" "),n("p",[t._v("安转好后使用命令长查看命令帮助")]),t._v(" "),t._m(33),t._m(34),t._v(" "),t._m(35),t._v(" "),t._m(36),t._v(" "),t._m(37),t._v(" "),n("p",[t._v("大致原理：")]),t._v(" "),t._m(38),t._v(" "),n("p",[t._v("nginx服务启动之后会生成两个进程一个master和一个worker进程，使用命令行查看")]),t._v(" "),t._m(39),n("p",[t._v("日志切割原理：")]),t._v(" "),t._m(40),t._v(" "),t._m(41),t._v(" "),n("p",[t._v("nginx.conf配置文件如下")]),t._v(" "),t._m(42),n("p",[t._v("server中几个重要的设置项")]),t._v(" "),t._m(43),t._v(" "),t._m(44),t._v(" "),t._m(45),t._v(" "),t._m(46),t._m(47),t._v(" "),t._m(48),t._m(49),t._v(" "),t._m(50),t._m(51),t._v(" "),t._m(52),t._m(53),t._v(" "),t._m(54)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"nginx"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx","aria-hidden":"true"}},[this._v("#")]),this._v(" nginx")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"nginx简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx简介","aria-hidden":"true"}},[this._v("#")]),this._v(" nginx简介")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("nginx是一个web server(web服务器)，也可用于反向代理、负载均衡、邮件代理、HTTP缓存。该软件由Igor Sysoev创建，于2004年公开发布。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"nginx产生原因"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx产生原因","aria-hidden":"true"}},[this._v("#")]),this._v(" nginx产生原因")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("由于互联网的普及、全球化和物联网等，导致互联网的数据量快速增长")]),this._v(" "),s("li",[this._v("服务器的硬件由单核CPU向多核的转变")]),this._v(" "),s("li",[this._v("低效的apache（也是一个web服务器）")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("处理高并发、并且保持高性能")]),this._v(" "),s("li",[this._v("nginx的架构是基于多核CPU的，能充分利用系统资源")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"nginx主要优点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx主要优点","aria-hidden":"true"}},[this._v("#")]),this._v(" nginx主要优点")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ol",[n("li",[t._v("高并发、高性能")]),t._v(" "),n("li",[t._v("可扩展性好：这一点主要取决于它的模块化设计")]),t._v(" "),n("li",[t._v("高可靠性：能在服务器稳定运行数年而不需要重启")]),t._v(" "),n("li",[t._v("热部署：可以在不停止nginx服务的情况下，升级nginx版本")]),t._v(" "),n("li",[t._v("开源协议使用的是BSD许可证：BSD许可证让nginx源代码开源免费，并且可以根据自身需求修改源代码用于商业环境")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"nginx四个重要的组成部分"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx四个重要的组成部分","aria-hidden":"true"}},[this._v("#")]),this._v(" nginx四个重要的组成部分")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("二进制可执行文件：服务器启动是通过这个文件")]),this._v(" "),s("li",[this._v("配置文件nginx.conf：配置文件控制着ngixn的行为")]),this._v(" "),s("li",[this._v("访问日志access.log：记录每个http请求的访问记录")]),this._v(" "),s("li",[this._v("错误日志error.log：当请求异常时会将错误信息写入错误日志，便于排查问题")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"nginx的发行版本选择"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx的发行版本选择","aria-hidden":"true"}},[this._v("#")]),this._v(" nginx的发行版本选择")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"nginx的编译安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx的编译安装","aria-hidden":"true"}},[this._v("#")]),this._v(" nginx的编译安装")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{attrs:{class:"token function"}},[this._v("curl")]),this._v(" -O http://nginx.org/download/nginx-1.15.8.tar.gz\n"),s("span",{attrs:{class:"token function"}},[this._v("tar")]),this._v(" -zxvf nginx-1.15.8.tar.gz\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("./configure --help\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("安装路径设置，一般设置一个"),s("code",[this._v("--prefix=PATH")]),this._v("即可，其它目录会相对这个目录生成对应的目录，需要特殊指定的用参数来设置")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("  --prefix"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("PATH                      "),n("span",{attrs:{class:"token keyword"}},[t._v("set")]),t._v(" installation prefix\n  --sbin-path"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("PATH                   "),n("span",{attrs:{class:"token keyword"}},[t._v("set")]),t._v(" nginx binary pathname\n  --modules-path"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("PATH                "),n("span",{attrs:{class:"token keyword"}},[t._v("set")]),t._v(" modules path\n  --conf-path"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("PATH                   "),n("span",{attrs:{class:"token keyword"}},[t._v("set")]),t._v(" nginx.conf pathname\n  --error-log-path"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("PATH              "),n("span",{attrs:{class:"token keyword"}},[t._v("set")]),t._v(" error log pathname\n  --pid-path"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("PATH                    "),n("span",{attrs:{class:"token keyword"}},[t._v("set")]),t._v(" nginx.pid pathname\n  --lock-path"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("PATH                   "),n("span",{attrs:{class:"token keyword"}},[t._v("set")]),t._v(" nginx.lock pathname\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"2"}},[s("li",[this._v("确定使用哪些模块和不使用哪些模块")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{attrs:{class:"token comment"}},[this._v("# 这种前缀的通常表示默认不安装，需要安转就要使用参数指定")]),this._v("\n--with-\n"),s("span",{attrs:{class:"token comment"}},[this._v("# 这种前缀的通常默认都会安转，不需要安装也要用参数指定")]),this._v("\n--without-\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"3"}},[s("li",[this._v("一些杂项参数的设置，具体看文档描述即可")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("./configure --prefix"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("/Users/simon/Code/nginx\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nConfiguration summary\n  + using system PCRE library\n  + OpenSSL library is not used\n  + using system zlib library\n\n  nginx path prefix: "),n("span",{attrs:{class:"token string"}},[t._v('"/Users/simon/Code/nginx"')]),t._v("\n  nginx binary file: "),n("span",{attrs:{class:"token string"}},[t._v('"/Users/simon/Code/nginx/sbin/nginx"')]),t._v("\n  nginx modules path: "),n("span",{attrs:{class:"token string"}},[t._v('"/Users/simon/Code/nginx/modules"')]),t._v("\n  nginx configuration prefix: "),n("span",{attrs:{class:"token string"}},[t._v('"/Users/simon/Code/nginx/conf"')]),t._v("\n  nginx configuration file: "),n("span",{attrs:{class:"token string"}},[t._v('"/Users/simon/Code/nginx/conf/nginx.conf"')]),t._v("\n  nginx pid file: "),n("span",{attrs:{class:"token string"}},[t._v('"/Users/simon/Code/nginx/logs/nginx.pid"')]),t._v("\n  nginx error log file: "),n("span",{attrs:{class:"token string"}},[t._v('"/Users/simon/Code/nginx/logs/error.log"')]),t._v("\n  nginx http access log file: "),n("span",{attrs:{class:"token string"}},[t._v('"/Users/simon/Code/nginx/logs/access.log"')]),t._v("\n  nginx http client request body temporary files: "),n("span",{attrs:{class:"token string"}},[t._v('"client_body_temp"')]),t._v("\n  nginx http proxy temporary files: "),n("span",{attrs:{class:"token string"}},[t._v('"proxy_temp"')]),t._v("\n  nginx http fastcgi temporary files: "),n("span",{attrs:{class:"token string"}},[t._v('"fastcgi_temp"')]),t._v("\n  nginx http uwsgi temporary files: "),n("span",{attrs:{class:"token string"}},[t._v('"uwsgi_temp"')]),t._v("\n  nginx http scgi temporary files: "),n("span",{attrs:{class:"token string"}},[t._v('"scgi_temp"')]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("配置之后会生成中间文件目录"),s("code",[this._v("objs")]),this._v("，该目录有个"),s("code",[this._v("ngx_modules.c")]),this._v("，该文件记录了哪些模块会编译进来")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token comment"}},[t._v("# 编译并安装")]),t._v("\n"),n("span",{attrs:{class:"token function"}},[t._v("make")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("make")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("install")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("进入之前指定的"),s("code",[this._v("--prefix")]),this._v("目录，启动文件在sbin目录")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[this._v("sbin/nginx\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("在浏览器访问"),s("code",[this._v("http://localhost")]),this._v("即可看到默认的nginx欢迎页面")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"nginx配置文件的通用语法介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx配置文件的通用语法介绍","aria-hidden":"true"}},[this._v("#")]),this._v(" nginx配置文件的通用语法介绍")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ol",[n("li",[t._v("指令和指令块组成，每条指令以"),n("code",[t._v("；")]),t._v("分号结尾")]),t._v(" "),n("li",[t._v("指令与参数间以空格符号分割")]),t._v(" "),n("li",[t._v("指令块以"),n("code",[t._v("{}")]),t._v("（大括号）将多条指令组织在一起")]),t._v(" "),n("li",[t._v("include语句允许组合多个配置文件以提升可维护性")]),t._v(" "),n("li",[t._v("使用"),n("code",[t._v("#")]),t._v("符号添加注释，提升可读性")]),t._v(" "),n("li",[t._v("使用"),n("code",[t._v("$")]),t._v("符号就可以使用一个变量")]),t._v(" "),n("li",[t._v("部分指令的参数支持正则表达式")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-nginx extra-class"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("http")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("include")]),t._v("       mime"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token keyword"}},[t._v("types")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("server")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{attrs:{class:"token keyword"}},[t._v("listen")]),t._v("       "),n("span",{attrs:{class:"token number"}},[t._v("80")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{attrs:{class:"token keyword"}},[t._v("server_name")]),t._v("  localhost"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{attrs:{class:"token keyword"}},[t._v("root")]),t._v(" \t     "),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("var"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("www"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("default"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{attrs:{class:"token keyword"}},[t._v("access_log")]),t._v("   "),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("var"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("log"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("default"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("access"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("log  main"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{attrs:{class:"token keyword"}},[t._v("location")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{attrs:{class:"token keyword"}},[t._v("index")]),t._v("  "),n("span",{attrs:{class:"token keyword"}},[t._v("index")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html "),n("span",{attrs:{class:"token keyword"}},[t._v("index")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("htm "),n("span",{attrs:{class:"token keyword"}},[t._v("index")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("php"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{attrs:{class:"token keyword"}},[t._v("autoindex")]),t._v("   on"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{attrs:{class:"token keyword"}},[t._v("include")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("etc"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("fastcgi"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("conf"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{attrs:{class:"token keyword"}},[t._v("fastcgi_intercept_errors")]),t._v(" on"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{attrs:{class:"token keyword"}},[t._v("fastcgi_pass")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("127.0")]),n("span",{attrs:{class:"token number"}},[t._v(".0")]),n("span",{attrs:{class:"token number"}},[t._v(".1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{attrs:{class:"token number"}},[t._v("9000")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{attrs:{class:"token keyword"}},[t._v("location")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("hls"),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{attrs:{class:"token keyword"}},[t._v("types")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                application"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("vnd"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apple"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mpegurl m3u8"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                video"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("mp2t ts"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),n("span",{attrs:{class:"token keyword"}},[t._v("root")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("var"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("www"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{attrs:{class:"token keyword"}},[t._v("add_header")]),t._v(" Cache"),n("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("Control no"),n("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("cache"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("error_page")]),t._v("  "),n("span",{attrs:{class:"token number"}},[t._v("404")]),t._v("     "),n("span",{attrs:{class:"token operator"}},[t._v("/")]),n("span",{attrs:{class:"token number"}},[t._v("404.")]),t._v("html"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("error_page")]),t._v("  "),n("span",{attrs:{class:"token number"}},[t._v("403")]),t._v("     "),n("span",{attrs:{class:"token operator"}},[t._v("/")]),n("span",{attrs:{class:"token number"}},[t._v("403.")]),t._v("html"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("include")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("etc"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("servers"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),n("span",{attrs:{class:"token operator"}},[t._v("*")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("conf"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("http")]),this._v(" "),s("li",[this._v("server：一个server对应一个或者一组域名服务，设置的域名的时候可以设置多个域名都通过这个server来处理")]),this._v(" "),s("li",[this._v("upstream：上游服务，当需要与其它服务交互可以使用到upstrem")]),this._v(" "),s("li",[this._v("location：location表示一个url表达式")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"配置参数的常用单位"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置参数的常用单位","aria-hidden":"true"}},[this._v("#")]),this._v(" 配置参数的常用单位")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ol",[n("li",[t._v("ms（milliseconds）：毫秒")]),t._v(" "),n("li",[t._v("s（seconds）：秒")]),t._v(" "),n("li",[t._v("m（minutes）：分钟")]),t._v(" "),n("li",[t._v("h（hours）：小时")]),t._v(" "),n("li",[t._v("d（days）:天")]),t._v(" "),n("li",[t._v("w（weeks）：周")]),t._v(" "),n("li",[t._v("M（months）：月，以30天计算")]),t._v(" "),n("li",[t._v("y（years）：年，以365天计算")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("留空：表示字节（bytes）")]),this._v(" "),s("li",[this._v("k/K：千字节（kilobytes）")]),this._v(" "),s("li",[this._v("m/M：兆字节（megabytes）")]),this._v(" "),s("li",[this._v("g/G：吉字节（gigabytes）")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"nginx命令行的使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx命令行的使用","aria-hidden":"true"}},[this._v("#")]),this._v(" nginx命令行的使用")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("nginx -h\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 或者 nginx -?")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 得到如下信息")]),t._v("\nnginx version: nginx/1.15.7\nUsage: nginx "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("-?hvVtTq"),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("-s signal"),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("-c filename"),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("-p prefix"),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("-g directives"),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\nOptions:\n  -?,-h         "),n("span",{attrs:{class:"token keyword"}},[t._v(":")]),t._v(" this "),n("span",{attrs:{class:"token function"}},[t._v("help")]),t._v("\n  -v            "),n("span",{attrs:{class:"token keyword"}},[t._v(":")]),t._v(" show version and "),n("span",{attrs:{class:"token keyword"}},[t._v("exit")]),t._v("\n  -V            "),n("span",{attrs:{class:"token keyword"}},[t._v(":")]),t._v(" show version and configure options "),n("span",{attrs:{class:"token keyword"}},[t._v("then")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("exit")]),t._v("\n  -t            "),n("span",{attrs:{class:"token keyword"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("test")]),t._v(" configuration and "),n("span",{attrs:{class:"token keyword"}},[t._v("exit")]),t._v("\n  -T            "),n("span",{attrs:{class:"token keyword"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("test")]),t._v(" configuration, dump it and "),n("span",{attrs:{class:"token keyword"}},[t._v("exit")]),t._v("\n  -q            "),n("span",{attrs:{class:"token keyword"}},[t._v(":")]),t._v(" suppress non-error messages during configuration testing\n  -s signal     "),n("span",{attrs:{class:"token keyword"}},[t._v(":")]),t._v(" send signal to a master process: stop, quit, reopen, reload\n  -p prefix     "),n("span",{attrs:{class:"token keyword"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("set")]),t._v(" prefix path "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("default: /usr/local/Cellar/nginx-full/1.15.7/"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  -c filename   "),n("span",{attrs:{class:"token keyword"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("set")]),t._v(" configuration "),n("span",{attrs:{class:"token function"}},[t._v("file")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("default: /usr/local/etc/nginx/nginx.conf"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  -g directives "),n("span",{attrs:{class:"token keyword"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("set")]),t._v(" global directives out of configuration "),n("span",{attrs:{class:"token function"}},[t._v("file")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("-v，-V：打印出版本信息，-V会打印出编译安装时候的configure选项")]),this._v(" "),s("li",[this._v("-t，-T：会检测配置文件是否存在语法问题并打印出问题信息，常用于服务修改后上线前的测试")]),this._v(" "),s("li",[this._v("-s：这个会给nginx主进程一个信号，有以下4种")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("stop：立刻停止服务")]),this._v(" "),s("li",[this._v("quit：优雅的停止服务，处理正在进行的请求，新的请求将会直接拒绝，等到处理完所有请求就会停止服务")]),this._v(" "),s("li",[this._v("reload：这个在不停止对外服务的情况下重新载入配置文件")]),this._v(" "),s("li",[this._v("reopen：当需要换一个日志文件来记录日志时，可以使用这个信号")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"4"}},[s("li",[this._v("-c：指定启动的配置文件来启动，不使用默认的配置文件")]),this._v(" "),s("li",[this._v("-p：指定运行目录")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"nginx版本热更新和日志切割"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx版本热更新和日志切割","aria-hidden":"true"}},[this._v("#")]),this._v(" nginx版本热更新和日志切割")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("通过直接替换"),n("code",[t._v("sbin")]),t._v("目录下面的"),n("code",[t._v("nginx")]),t._v("二进制可执行文件，替换前需要先备份一下之前的二进制文件；给master进程通过"),n("code",[t._v("kill")]),t._v("命令发送一个"),n("code",[t._v("-USR2")]),t._v("信号，就会使用之前复制的二进制文件启动一个nginx服务，\n两个nginx服务是并存的，但是旧的nginx服务中的worker进程是不会监听80和443端口的，之后给旧的nginx的master进程使用"),n("code",[t._v("kill")]),t._v("命令发送一个"),n("code",[t._v("-WINCH")]),t._v("信号，旧的worker进程就会被关闭，旧master进程会继续运行，当新版本存在问题时，让旧的master进程重新创建worker进程")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token function"}},[t._v("ps")]),t._v(" aux "),n("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("grep")]),t._v(" nginx\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 这里省略调 grep 命令产生的进程")]),t._v("\nsimon 75728 0.0 0.0 4296252  1304  ??  S  9:31PM  0:00.00 nginx: worker process\nsimon 75727 0.0 0.0 4296016  516   ??  Ss 9:31PM  0:00.00 nginx: master process sbin/nginx\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 75728 为worker进程id")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 75727 为master进程id")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("先将日志使用"),s("code",[this._v("mv")]),this._v("进行备份（cp命令会造成部分日志丢失问题，而mv不会），在通过执行"),s("code",[this._v("nginx -s reopen")]),this._v("就会新生成日志文件")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"静态服务器的一些重要配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#静态服务器的一些重要配置","aria-hidden":"true"}},[this._v("#")]),this._v(" 静态服务器的一些重要配置")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-nginx extra-class"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[n("span",{attrs:{class:"token comment"}},[t._v("# 设置worker的进程个数")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("worker_processes")]),t._v("  "),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("events")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("# worker进程允许的最大连接数")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("worker_connections")]),t._v("  "),n("span",{attrs:{class:"token number"}},[t._v("1024")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("http")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("include")]),t._v("       mime"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token keyword"}},[t._v("types")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("default_type")]),t._v("  application"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("octet"),n("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("stream"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("#log_format  main  '$remote_addr - $remote_user [$time_local] \"$request\" '")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("#                  '$status $body_bytes_sent \"$http_referer\" '")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v('#                  \'"$http_user_agent" "$http_x_forwarded_for"\';')]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("#access_log  logs/access.log  main;")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("sendfile")]),t._v("        on"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("#tcp_nopush     on;")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("#keepalive_timeout  0;")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("keepalive_timeout")]),t._v("  "),n("span",{attrs:{class:"token number"}},[t._v("65")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("#gzip  on;")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("server")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{attrs:{class:"token keyword"}},[t._v("listen")]),t._v("       "),n("span",{attrs:{class:"token number"}},[t._v("80")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{attrs:{class:"token keyword"}},[t._v("server_name")]),t._v("  localhost"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{attrs:{class:"token comment"}},[t._v("#charset koi8-r;")]),t._v("\n        "),n("span",{attrs:{class:"token comment"}},[t._v("#access_log  logs/host.access.log  main;")]),t._v("\n        "),n("span",{attrs:{class:"token keyword"}},[t._v("location")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{attrs:{class:"token keyword"}},[t._v("root")]),t._v("   html"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{attrs:{class:"token keyword"}},[t._v("index")]),t._v("  "),n("span",{attrs:{class:"token keyword"}},[t._v("index")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html "),n("span",{attrs:{class:"token keyword"}},[t._v("index")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("htm"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("listen：监听的端口号")]),this._v(" "),s("li",[this._v("server_name：域名")]),this._v(" "),s("li",[this._v("root：静态资源的根目录，也可以使用alias\nroot和alias使用上有差别，主要有以下几点")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("alias只能在location中使用，root可以在http、server、location中使用")]),this._v(" "),s("li",[this._v("alias指定当前location的访问根路径，")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"4"}},[s("li",[this._v("gzip：为了让静态资源文件在网络中传输更快，需要使用这个指令")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-nginx extra-class"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[n("span",{attrs:{class:"token comment"}},[t._v("# gzip是设置在http指令块里面的")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 开启gzip")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("gzip")]),t._v(" on"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 设置需要压缩文件的最小值，无单位默认是字节（Bytes），也可使用其它单位")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 压缩是需要消耗服务器CPU资源的，所以压缩最小值设置不能过小，设置很小的值只是为了测试效果")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("gzip_min_length")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 设置文件压缩等级")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("gzip_comp_level")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("2")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 设置那些类型的文件需要压缩")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("gzip")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("types")]),t._v(" text"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("plain text"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("css text"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("javascript application"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("xml image"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("gif"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"5"}},[s("li",[this._v("autoindex: 当根目录或者根目录下某个子目录需要以一个列表的形式展现的时候可以，使用这个指令")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-nginx extra-class"},[s("pre",{pre:!0,attrs:{class:"language-nginx"}},[s("code",[s("span",{attrs:{class:"token comment"}},[this._v("# 这个指令在location指令块中")]),this._v("\n"),s("span",{attrs:{class:"token keyword"}},[this._v("autoindex")]),this._v(" on"),s("span",{attrs:{class:"token punctuation"}},[this._v(";")]),this._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"6"}},[s("li",[this._v("set $limit_rate：设置资源的传输速度；在服务器带宽有限的情况下，当用户访问某些大资源文件的时候，不设置传输速度的话，会影响其它用户或其它资源的访问，这个值设置在location中")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-nginx extra-class"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[n("span",{attrs:{class:"token comment"}},[t._v("# 可以给某些大资源文件放在一个目录，通过一个location去限制一下他的传输速度")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("# set 也可设置其它东西，具体需要去nginx官网查看提供了哪些变量可以设置")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("set")]),t._v(" "),n("span",{attrs:{class:"token variable"}},[t._v("$limit_rate")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("1")]),t._v("k"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"7"}},[s("li",[this._v("log_format：定义日志的格式，在http指令块中使用，可以存在多个log_format用于针对不同场景写不同的日志")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-nginx extra-class"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[n("span",{attrs:{class:"token comment"}},[t._v("# main 表示这种日志格式的名字，后面的变量表示日志的格式，具体有哪些变量可供使用需要查看官方文档")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("log_format")]),t._v("  main  "),n("span",{attrs:{class:"token string"}},[t._v("'$remote_addr - $remote_user [$time_local] \"$request\" '")]),t._v("\n                     "),n("span",{attrs:{class:"token string"}},[t._v("'$status $body_bytes_sent \"$http_referer\" '")]),t._v("\n                     "),n("span",{attrs:{class:"token string"}},[t._v('\'"$http_user_agent" "$http_x_forwarded_for"\'')]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"8"}},[s("li",[this._v("access_log和error_log：设置访问日志和错误日志，可以在server和location指令块中使用，写在不同的指令块中，决定了请求如何写日志")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-nginx extra-class"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[n("span",{attrs:{class:"token comment"}},[t._v("# 通过之前给log_format设置名字，在这里就可以使用了")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("access_log")]),t._v(" logs"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("access"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("log main"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("error_log")]),t._v(" logs"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("error"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("log error"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])}],!1,null,null,null);e.options.__file="README.md";s.default=e.exports}}]);